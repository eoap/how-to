[project]
name = "cwl-how-to"
version = "1.0.0"

[build]
engine = "cluster"

[build.local]
runtime="docker"
registry="cr.terradue.com/earthquake-monitoring"

[build.cluster]
namespace = "eoap-how-to"
serviceAccount = "kaniko-sa"
registry = "cr.terradue.com/earthquake-monitoring"
secret = "kaniko-secret"


[[workflows]]
path = "cwl-workflows/cwl-workflows/capture-json-stdout.cwl"

[[workflows.tests]]
name = "capture-json-stdout-test-"
description = "Test case for capture json stdout"

[workflows.tests.params]
stac-item = "https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/S2B_53HPA_20210723_0_L2A"
common-band-name = "red"

[workflows.tests.execution.cluster]
usage_report = "usage.json"
pool_logs_basepath = "logs"
max_ram = "4G"
max_cores = 8
pod_serviceaccount = "calrissian-sa"
tool_logs_basepath = "logs"

[workflows.tests.execution.paths]
volume = "/calrissian/how-to/capture-json-stdout"
stdout = "results.json"
stderr = "app.log"
tmp_outdir_prefix = "tmp"
outdir = "results"